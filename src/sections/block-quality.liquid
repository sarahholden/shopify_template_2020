<section class="icon-blocks-section">

  <!-- Heading & Subheading -->
  {% if section.settings.subheading != blank %}
    <h3 class="small-caps">
      {{ section.settings.subheading }}
    </h3>
  {% endif %}
  {% if section.settings.title != blank %}
    <h2>{{ section.settings.title }}</h2>
  {% endif %}

  <!-- Icon Blocks -->
  <div class="cols-4 no-gutters">
    {% for block in section.blocks %}
      {% case block.type %}
      {% when 'icon_block' %}
        <div>
          {% if block.settings.title != blank %}
            {{ block.settings.title }}
          {% endif %}
          {%- assign lazy_image = block.settings.image -%}
          {%- assign img_url = lazy_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
          <img class="lazyload"
              data-src="{{ img_url }}"
              data-widths="[360, 540, 720, 900, 1080, 1600]"
              data-aspectratio="{{ lazy_image.aspect_ratio }}"
              data-sizes="auto"
              role="presentation"
              alt="{{ lazy_image.alt }}">
          {% if block.settings.desc != blank %}
            {{ block.settings.desc }}
          {% endif %}
        </div>
      {% endcase %}
    {% endfor %}
  </div>


</section>


{% schema %}
  {
    "name": "Icon Blocks Section",
    "settings": [
      {
        "id": "title",
        "type": "textarea",
        "label": "Title"
      },
      {
        "id": "subheading",
        "type": "textarea",
        "label": "Subheading"
      }
    ],
    "blocks": [
      {
        "type": "icon_block",
        "name": "Icon Block",
        "settings": [
          {
            "id": "title",
            "type": "text",
            "label": "Title"
          },
          {
            "id": "image",
            "type": "image_picker",
            "label": "Image"
          },
          {
            "id": "desc",
            "type": "textarea",
            "label": "Copy"
          }

        ]
      }
    ],
    "presets": [
      {
        "name": "Icon Blocks Section",
        "category": "Sections"
      }
    ]
  }

{% endschema %}
